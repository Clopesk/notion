<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Greeting Message</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>

<style>
#lbl {
    font-family: monospace;
    font-size: x-large;
    color: #ffffff;
    padding: 5px;
    border: 1px solid #000000;
    text-align: center;
    line-height: 1.5;
    height:85% 


}
#date{
    font-size:large;
}
body{
    background-color: white; /* aliceblue */
}
    </style>
</head>
<body>
    <div id="lbl"></div>
</body>
	<py-script>
import math as mt
import datetime as dt
from datetime import date

lat = 38.7071
long = - 9.13549


data_hora = dt.datetime.now()
data_hora_formatada = data_hora.strftime("%d/%m/%Y %H:%M") # data actual
data_hora_passada = dt.datetime(data_hora.year, 1, 1, 22, 00) # inicio do ano.
diferenca = data_hora - data_hora_passada 
n = diferenca.days + 2 # número de dias desde o inicio do ano.
desvio = 0.7148



arg = mt.radians((284+n)* 360/365) # argumento em radianos
lat_rad =  mt.radians(lat) # latitude em radianos
declina = mt.radians(23.45 * mt.sin(arg)) # declinação em radianos
td_arg = -mt.tan(lat_rad)* mt.tan(declina)
td = 2/15 * mt.degrees(mt.acos(td_arg)) 

# Nascer do Sol
sol_nascer = 12- td/2 + desvio
sol_nascer= mt.modf(sol_nascer)
sol_nascer_hr = sol_nascer[1]
sol_nascer_min = 60 * sol_nascer[0]

sol_nascer_conv = mt.modf(sol_nascer_min)
sol_nascer_min =  sol_nascer_conv[1]
sol_nascer_seg = 60 * sol_nascer_conv[0]
sol_nascer_convseg = mt.modf(sol_nascer_seg)
sol_nascer_seg = sol_nascer_convseg[1]

# Por do Sol
desvio_por = 0.945
sol_por = 12 + td/2 + desvio_por
sol_por= mt.modf(sol_por)
sol_por_hr = sol_por[1]
sol_por_min = 60 * sol_por[0]

sol_por_conv = mt.modf(sol_por_min)
sol_por_min =  sol_por_conv[1]
sol_por_seg = 60 * sol_por_conv[0]
sol_por_convseg = mt.modf(sol_por_seg)
sol_por_seg = sol_por_convseg[1]

dayOfWeek = ("Segunda", "Terça", "Quarta", "Quinta", "Sexta", "Sábado", "Domingo")
num = date.today().weekday()
hrs = data_hora.hour
minutos = data_hora.minute
hrs = hrs + minutos/60
sum_sol_nascer= sol_nascer[0] + sol_nascer[1]
sum_sol_por= sol_por[0] + sol_por[1]

if hrs >= sum_sol_nascer and hrs <= 13:
  greet = "Bom Dia"
elif hrs > 13 and hrs < sum_sol_por:
  greet = "Boa Tarde"
else:
  greet = "Boa Noite"
			      
dataHoje = data_hora.strftime("%d/%m/%Y")
date = dayOfWeek[num]+" " + dataHoje
	
print(greet)	
print(date)	

		
	</py-script>

    

</html>
